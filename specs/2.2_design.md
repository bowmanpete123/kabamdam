# Design Spec: Pre-commit Hook (2.2)

## Requirement Traceability
- **Roadmap Item**: 2.2 Pre-commit Hook
- **Goal**: Automatically update status visualization on commit.

## Architecture
- **Tool**: `pre-commit` framework.
- **Hook Type**: `local` or `python` (since it's a python package).
- **Command**: `kabamdam` (using the entry point defined in 2.1).

## Implementation Details

### Hook Definition (`.pre-commit-hooks.yaml`)
This file allows others to use `kabamdam` as a pre-commit hook in their own projects.
```yaml
- id: kabamdam
  name: kabamdam
  description: Update project status heatmap and README links.
  entry: kabamdam
  language: python
  files: ^(docs/roadmap/ROADMAP\.md|timesheets\.md)$
  pass_filenames: false
```

### Local Usage (`.pre-commit-config.yaml`)
For testing in this repo:
```yaml
repos:
  - repo: local
    hooks:
      - id: kabamdam
        name: kabamdam
        entry: kabamdam
        language: system
        files: ^(docs/roadmap/ROADMAP\.md|timesheets\.md)$
        pass_filenames: false
```

## Logic Flow
1. User modifies `ROADMAP.md` or `timesheets.md`.
2. User runs `git commit`.
3. `pre-commit` runs `kabamdam`.
4. `kabamdam` updates `status.svg` and `README.md`.
5. If `README.md` or `status.svg` changed, the user might need to stage them (or we can suggest `pre-commit` to stage them if configured). Note: Standard pre-commit hooks don't usually `git add` for you unless specified, but they can fail if they change files.

## Technical Decomposition
- **Unit**: Hook Metadata
  - Create `.pre-commit-hooks.yaml`.
- **Unit**: Integration Test
  - Verify hook execution in a simulated commit.
