# Behavioral Spec: SVG Heatmap Enhancements (1.3.1 - 1.3.3)

## Requirement Traceability
- **Roadmap Item**: 1.3 SVG Generator
    - 1.3.1 Design SVG Heatmap (4 colors: Progress, Lessons, Design, Planned)
    - 1.3.2 Implement Bug Icons in status list
- **Design Spec**: [1.3.1_design.md](../specs/1.3.1_design.md)

## Unit: SVG Palette and Legend

### Scenario 1: Correct Color Application (Happy Path)
- **Input**: A list of `RoadmapTask` objects with varied statuses (`DONE`, `TESTING`, `ANALYSIS`, `DEVELOPMENT`, `TODO`).
- **Expected Outcome**:
    - `DONE` tasks are rendered with `#2ea44f`.
    - `TESTING` tasks are rendered with `#8250df`.
    - `ANALYSIS` and `DEVELOPMENT` tasks are rendered with `#0969da`.
    - `TODO` tasks are rendered with `#8b949e`.

### Scenario 2: Updated Legend Labels (Happy Path)
- **Input**: `SVGGenerator.generate()` is called.
- **Expected Outcome**: The SVG contains a legend with exactly four items:
    - "Progress" (linked to `#2ea44f`)
    - "Lessons" (linked to `#8250df`)
    - "Design" (linked to `#0969da`)
    - "Planned" (linked to `#8b949e`)

## Unit: Bug Visual Indicator

### Scenario 3: Bug Icon Rendering (Happy Path)
- **Input**: A `RoadmapTask` of type `BUG`.
- **Expected Outcome**: The rendered SVG element for this task contains a child `<circle>` or similar visual marker (e.g., a white circle in the center of the square) to distinguish it from a `SUBTASK`.

### Scenario 4: Subtask Rendering (Happy Path)
- **Input**: A `RoadmapTask` of type `SUBTASK`.
- **Expected Outcome**: The rendered SVG element is a plain `<rect>` with no bug icon.

### Scenario 5: Hierarchy Preservation (Edge Case)
- **Input**: A deep hierarchy where a `BUG` is nested several levels deep.
- **Expected Outcome**: `_get_atomic_tasks` correctly extracts the `BUG` and it is rendered with its icon.

### Scenario 6: No Status Match (Error State)
- **Input**: A task with an unrecognized status (if possible).
- **Expected Outcome**: Fallback to the "Planned" (`#8b949e`) color and no bug icon unless explicitly typed as a `BUG`.

## Unit: Integration

### Scenario 7: Full Roadmap Render (Happy Path)
- **Input**: A complex roadmap with multiple Epics, Stories, Subtasks, and Bugs.
- **Expected Outcome**: A valid SVG string that renders all atomic items correctly grouped by Epic, with the new color scheme and bug icons visible.
