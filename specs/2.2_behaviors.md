# Behavioral Spec: Pre-commit Hook (2.2)

## Requirement Traceability
- **Roadmap Item**: 2.2 Pre-commit Hook
- **Design Spec**: [2.2_design.md](../specs/2.2_design.md)

## Unit: Hook Triggering

### Scenario 1: Trigger on Roadmap Change
- **Input**: User modifies `docs/roadmap/ROADMAP.md` and runs `git commit`.
- **Expected Outcome**:
    - The `kabamdam` hook is executed.
    - `docs/roadmap/status.svg` is regenerated.
    - `README.md` is updated.

### Scenario 2: Trigger on Timesheet Change
- **Input**: User modifies `timesheets.md` and runs `git commit`.
- **Expected Outcome**:
    - The `kabamdam` hook is executed.
    - Status visualization is updated.

### Scenario 3: Bypass on Unrelated Changes
- **Input**: User modifies a Python file (e.g., `src/kabamdam/parser.py`) and runs `git commit`.
- **Expected Outcome**:
    - The `kabamdam` hook is skipped (or runs and does nothing, but preferably skipped via file inclusion filter).

## Unit: Execution Outcomes

### Scenario 4: Successful Update
- **Input**: Valid roadmap and markers exist.
- **Expected Outcome**:
    - Hook returns exit code 0.
    - Commit proceeds (Note: user may need to stage the changes to README/SVG if they weren't automatically handled).

### Scenario 5: Failure Blocks Commit
- **Input**: Roadmap has invalid format or README markers are missing.
- **Expected Outcome**:
    - `kabamdam` command returns non-zero exit code.
    - Pre-commit hook fails.
    - Git commit is blocked.
    - Error message from `kabamdam` is visible to the user.
