# Behavioral Spec: CLI Interface (2.1)

## Requirement Traceability
- **Roadmap Item**: 2.1 CLI Interface ("Wrap up" command)
- **Design Spec**: [2.1_design.md](../specs/2.1_design.md)

## Unit: CLI Commands

### Scenario 1: Default Execution (Happy Path)
- **Input**: Run `kabamdam` with no arguments in a project with default file locations (`docs/roadmap/ROADMAP.md`, `timesheets.md`, `README.md`).
- **Expected Outcome**:
    - `docs/roadmap/status.svg` is generated.
    - `README.md` is updated between markers.
    - Status message printed to console: "Successfully updated README.md with latest roadmap status."

### Scenario 2: Overriding Paths (Happy Path)
- **Input**: `kabamdam --roadmap-file custom_roadmap.md --output-svg custom.svg`
- **Expected Outcome**:
    - `custom.svg` is generated from `custom_roadmap.md`.
    - `README.md` is updated using the new path `custom.svg`.

### Scenario 3: Missing Roadmap File (Error State)
- **Input**: `kabamdam --roadmap-file non_existent.md`
- **Expected Outcome**:
    - Error message: "Error: Roadmap file 'non_existent.md' not found."
    - Exit code non-zero.
    - `README.md` is NOT modified.

## Unit: README Injection

### Scenario 4: Update Existing Markers (Happy Path)
- **Input**: `README.md` contains:
  ```markdown
  # My Project
  <!-- KABAMDAM:START -->
  old content
  <!-- KABAMDAM:END -->
  ```
- **Expected Outcome**: `README.md` markers now contain the new SVG image link and roadmap/timesheet links.

### Scenario 5: Missing Markers (Edge Case)
- **Input**: `README.md` has no markers.
- **Expected Outcome**: 
    - Warning: "Markers <!-- KABAMDAM:START --> and <!-- KABAMDAM:END --> not found in README.md. No update performed."
    - SVG is still generated.

### Scenario 6: Broken/Partial Markers (Error State)
- **Input**: `README.md` has `<!-- KABAMDAM:START -->` but no `<!-- KABAMDAM:END -->`.
- **Expected Outcome**:
    - Error: "Incomplete KABAMDAM markers in README.md."
    - No changes to `README.md`.

## Unit: Path Calculation

### Scenario 7: Relative SVG Path (Happy Path)
- **Input**: `README.md` is in root. `output-svg` is in `docs/roadmap/status.svg`.
- **Expected Outcome**: Image link in README uses `docs/roadmap/status.svg`.

### Scenario 8: Nested README (Edge Case)
- **Input**: `README.md` is in `docs/README.md`. `output-svg` is in `docs/roadmap/status.svg`.
- **Expected Outcome**: Image link in README uses `roadmap/status.svg`.
