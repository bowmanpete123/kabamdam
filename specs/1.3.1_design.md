# Design Spec: SVG Heatmap (1.3.1 - 1.3.3)

## Goals
- Harmonize color palette with requirements: Progress, Lessons, Design, Planned.
- Implement visual indicator for Bugs.
- Ensure hierarchical items are rendered consistently.

## Color Mapping
Based on the goal: "4 colors: Progress, Lessons, Design, Planned"

| Label | Status(es) | Color (Suggested) | Rationale |
| :--- | :--- | :--- | :--- |
| **Progress** | `DONE` | `#2ea44f` (Green) | Standard "completed" |
| **Lessons** | `TESTING` | `#8250df` (Purple) | Lessons learned/Verification |
| **Design** | `ANALYSIS`, `DEVELOPMENT` | `#0969da` (Blue) | Creative/Planning phase |
| **Planned** | `TODO` | `#8b949e` (Gray) | Future work |

## Bug Icon Design
Instead of a simple square, a Bug (`type == "BUG"`) should have a specific visual marker.
- **Option 1**: A small dot inside the square.
- **Option 2**: A different shape (e.g., a circle or a "bug-like" polygon).
- **Option 3**: A diagonal slash or border modification.

**Proposed Implementation**: A small white circle in the center of the status square to indicate it's a bug.

## Proposed Changes in `src/kabamdam/svg_generator.py`

### 1. `SVGConfig`
```python
class SVGConfig(BaseModel):
    # ...
    colors: dict = {
        TaskStatus.DONE: "#2ea44f",        # Progress
        TaskStatus.TESTING: "#8250df",     # Lessons
        TaskStatus.ANALYSIS: "#0969da",    # Design
        TaskStatus.DEVELOPMENT: "#0969da", # Design
        TaskStatus.TODO: "#8b949e",        # Planned
    }
```

### 2. `SVGGenerator._render_task(task, x, y)` (New Helper)
- Logic to render either a rect (for SUBTASK) or a rect + icon (for BUG).

### 3. `SVGGenerator._generate_legend`
- Update labels to match the new 4-color scheme.

## Verification Plan
1. **Visual inspection**: Generate an SVG from a roadmap with both subtasks and bugs.
2. **Automated tests**: Update `tests/test_svg_generator.py` to check for bug-specific elements in the SVG string.
